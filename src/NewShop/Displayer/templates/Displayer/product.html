{% extends 'Displayer/index.html' %}
{% load static %}
{% block content %}
 	<header>
 		<div class="container">
			<div class="product-image-box">
				<img class="product-image" src="{{product.imgUrl}}" >
			</div>
			<div class="product-info-box">
				<h1> {{ product }}</h1>
				<br>
				<div class="product-price-box">
				<h4> 현재 최저: {{low}} 원 </h4>
				<h4> 평균 : {{average}} 원</h4>
				</div>

				<div class="product-subscription-box">
					<button class="subscription_button" onclick="location.href='{%url 'togglebook' keyword=product%}'">
						{%if booked%}
							<img src="{%static 'images/subscription_on.png'%}" style="width:100%">
						{%else%}
							<img src="{%static 'images/subscription_off.png'%}" style="width:100%">
						{%endif%}
					</button>

					<button class="subscription_button" onclick="location.href='{%url 'alarmset' keyword=product%}'"><img src="{%static 'images/alarm.png'%}" style="width:150%"></button>

				</div>
			</div>
		</div>
	</header>
	<hr>
    <section id="section-graph">
    	<div class="container" >
    		<canvas id="myChart" height="60%" ></canvas> 
		</div>
	</section>
	<section class="section-product-news">
		<div class="container">
				<div class="row row-gutter">
					<div class="col-gutter">
						{%for new in news%}
							<div class="featured-item">
								<div class="featured-icon"><i class="fa fa-television"></i></div>
								<div class="featured-text" onclick="news_click();">
									<h4>{{new.title}} </h4>
									<h6>건조한 날씨가 계속되어 농가가 울상을 짓고있습니다. 사과는 적정량의 일조량과 수분을 필요로 하는데...</h6>
								</div>
							</div>
						{%endfor%}
					</div>
					
				</div>
	</section>
	<section class="section-tip">
		<div class="container">
			<h2>Tip</h2>
			<h3> 이 상품은 날씨, 기후, 정부정책에 영향을 받습니다.</h3>
	</section>
	<section class="section-market">
		<div class="container">
			<h2>가격</h2>
			{% for market in market_list %}
				<h5> {{market.market}} <a href="{{market.link}}"> {{market.price}}원 </a></h5>
			{% endfor %}
	</section>

	 <!-- 차트 -->

	 <script src="{%static 'js/Chart.bundle.js'%}"></script>
  	<script> var ctx = document.getElementById('myChart').getContext('2d'); 

  	var chart = new Chart(ctx, { // 챠트 종류를 선택 
type: 'line', 
// 챠트를 그릴 데이타
 data: {
  labels: ["2018-12-07 12:45:17", "2018-12-09 12:45:17", "2018-12-31 12:45:17", "2019-02-07 12:45:17", "2019-04-07 12:45:17", "2019-06-25 12:45:17", "2019-08-30 12:45:17"], 
  datasets: [
  { label: '사과', 
  backgroundColor: ['rgba(255,0,0,0.2)'], 
  borderColor: 'red', data: [0, 10, 5, 2, 20, 30, 45] }] }, // 옵션 
options: {
	scales: {
        xAxes: [{
            type: 'time',
            time: {
            	unit : 'day',
                displayFormats: {
                    day: 'YYHHMM'
                }
            },
            ticks: {
                source: 'data'
            }

        }]                    
    },
	tooltips: {
       callbacks: {
           label: function(tooltipItem) {
               return tooltipItem.xLabel+ Number(tooltipItem.yLabel) + " 사과는 맛있어..";
           }
       }
	}
} }); </script>
{% endblock %}